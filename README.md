# Рекомендации при верстке HTML5 сайтов

Этот сборник правил подходит для небольших сайтов и веб-приложений, 
а также может служить отправной точкой для дальнейших рассуждений
о построении своей системы правил верстки.

В конечном итоге не важно какую систему вы выберете. Главное, чтобы
она была единой для всего проекта.

## Общее

1. Верстка обязана соответствовать макету.
2. Должен быть указан правильный DOCTYPE (`<!DOCTYPE html>`) и кодировка UTF-8.
   Соответственно, весь текст тоже должен быть в UTF-8.
3. Сайт должен нормально смотреться на всех разрешениях более 1024px, а также иметь адаптивную верстку для
   всех устройств от 320px и не иметь горизонтального скролла.

## Инструменты

1. Нужно использовать [editorconfig](http://editorconfig.org/) для одинаковых настроек текстовых файлов.
2. Нужно использовать [CSSLint](http://csslint.net/) и [JSHint](http://jshint.com/)
   для валидации и проверки стилей и скриптов.

## Структура

1. Верстка должна быть семантической. Использованы теги `main`, `header`, `footer`, `aside`, `nav` и так далее.
   Кроме того, они должны быть использованы правильно. Также ошибочно полагать, что теги `header` и `footer`
   будут присутствовать на странице только для обозначения шапки и подвала. Они в равной мере могут относиться
   и к отдельному разделу страницы.
2. Заголовки должны располагаться в правильной структуре от `h1` и далее.
3. Списки должны быть использованы там, где подразумеваются списки. Например, ссылки в меню.
   `ul`, `ol` и `li` лучше простого перечисления `div`.
4. Поля в формах должны иметь правильный тип, настройки валидации и атрибут `required` там, где необходимо.
5. Все ссылки должны иметь заполненный атрибут `title`.
6. Нежелательно, когда верстка содержит пустые блоки с целью представления. Для этого есть псевдоэлементы в стилях.
7. Желательно структурировать код в блоки описывающие логику документа. Создавать `section` или `header` даже там,
   где он для презентационных целей не нужен. И наоборот - стараться не ставить лишний `div` там,
   где структура этого не требует, а это нужно лишь для визуальных эффектов.
8. Для отступа необходимо использовать настройки из [editorconfig](http://editorconfig.org/)
   или 2 пробела при отсутствии editorconfig. Использовать табуляцию запрещено.
9. Ссылки на чужие сайты должны быть с `target="_blank"`

## Стили

1. Стили должны быть подключены в секции `head`
2. Стили должны быть разложены по файлам. Сначала нормализация, потом стили плагинов, в конце собственные стили.
   Не нужно все пихать в один файл. Для этого есть программы-минификаторы.
3. Желательно следовать одной их техник оформления стилей: [MCSS](https://operatino.github.io/MCSS/),
   [BEM](https://ru.bem.info/).
4. Стили должны проходить проверку [CSSLint](http://csslint.net/). Допускается выключения следующих опций:
    * Disallow adjoining classes
5. Стили не должны применяться к тегам, идентификаторам, только к классам, если это специальным образом не оговорено.
    ```css
    /* Плохо */
    section {
        padding: 1em;
    }

    /* Хорошо */
    .orders {
        padding: 1em;
    }
    ```
6. В описании стилей очень нежелательно использовать каскад. Например, `.page-header .subheader {...}`.
    ```css
    /* Плохо */
    .page-header .subheader {
        font-weight: bold;
    }

    /* Хорошо */
    .page-header__page-subheader {
        font-weight: bold;
    }
    ```
7. Не должно быть каскада с тегами. Такое написание запрещено: `.page-header h2 {...}`. 
   Каскад из нескольких тегов неминуемо приведет вас к ошибкам, которые проявятся в самый неожиданный момент.
    ```css
    /* Плохо */
    header ul li {
        padding: 1em;
    }

    /* Хорошо */
    .page-header__page-reference {
        padding: 1em;
    }
    ```
8. Все стили должны быть расположены с начала строки. Не допускается расположения стилей имитируя зависимость и каскад.
    ```css
    /* Плохо */
    .page-header {
        font-weight: normal;
    }

        .page-header.__selected {
            font-weight: bolder;
        }

    /* Хорошо */
    .page-header {
        font-weight: normal;
    }

    .page-header.__selected {
        font-weight: bolder;
    }
    ```
9. Если стиль применяется к нескольким селекторам, то селекторы должны располагаться на разных строках.
    ```css
    /* Плохо */
    .page-header, .section-header {
        font-weight: bold;
    }

    /* Хорошо */
    .page-header,
    .section-header {
        font-weight: bold;
    }
    ```
10. Не допускается использование презентационных классов (`.red`, `.left`).
    Классы должны описываться сущность, которую представляют (`.order`, `.user`, `.main-menu-item`).
11. Для отступов текстовых элементов желательно использовать относительные единицы длина (em), а не абсолютные (px).
12. Высота текста должна указываться в пропорции, а не абсолютной величиной.
13. Каскад в стилях хорош для текста, для блоков нужно избегать каскада и использовать BEM или другую систему стилей.
14. Вместо создания класса-обертки необходимо создавать класс-вкладыш. Это сильно облегчает чтение и структуру.
    ```html
    <!-- Плохо -->
    <div class="product-wrapper">
        <section class="product">
            <!-- Содержание -->
        </section>
    </div>

    <!-- Хорошо -->
    <section class="product">
        <div class="product-inner">
            <!-- Содержание -->
        </div>
    </section>
    ```

## Шрифты

1. Шрифты должны по возможности подключаться с CDN ([Google Fonts](https://www.google.com/fonts)).
   Использование локальных только шрифтов в крайнем случае.
2. Базовое семейство шрифтов должно быть указано у тега `body`.
3. Всегда должно быть указано семейство шрифтов по умолчанию в конце списка шрифтов.
   Например, `sans-serif`, если основной контент набран шрифтом без засечек.
4. В стилях необходимо указывать только общее семейство шрифтов. `font-family` вида `'Roboto Light'` строго запрещено.
   Для этого есть соответствующий стиль `font-weight`.
    ```css
    /* Плохо */
    .page-header {
        font-family: 'Roboto Light';
    }

    /* Хорошо */
    .page-header {
        font-family: 'Roboto';
        font-weight: 300;
    }

    /* Отлично */
    body {
        font-family: 'Roboto', sans-serif;
        font-size: 16px;
    }

    .page-header {
        font-weight: lighter;
    }
    ```

## Скрипты

1. Скрипты должны подключаться после основного содержания страницы сразу перед закрывающим тегом `</body>`
2. Сторонние скрипты и библиотеки должны быть по возможности подключены с CDN.
5. Скрипты должны запускаться в строгом режиме и начинаться с `use strict`;
6. Каждый скрипт должен находиться в своем модуле - анонимной функции.
    ```javascript
    (function () {
        'use strict';

        console.log('Hello, module!');
    }());

    // Или при использовании события загрузки страницы
    $(function () {
        'use strict';

        console.log('Ready!');
    });

    // Экспорт функций и переменных из модуля
    var MyModule = (function ($) {
        'use strict';

        var doSmth = function () {
            console.log('Hello!');
        };

        return {
            doSmth: doSmth,
        };

    }(jQuery));

    var a = MyModule.doSmth();
    ```
7. В скриптах не допускается создавать уютный филиал callback hell'a.
    ```javascript
    // Очень плохо

    $('#my-id').on('click', function (evt) {
        $.getJSON('/data-url', function (data) {
            condole.log('Success!');
        });
    });

    // Хорошо

    $('#my-id').on('click', onClick);

    var onClick = function (evt) {
        $.getJSON('/data-url', onSuccess);
    };

    var onSuccess = function (data) {
        condole.log('Success!');
    };
    ```
9. Используйте соглашение по именованию html-классов для прикрепления событий и обозначения
   элементов DOM, которыми вы хотите управлять. Например, используйте префикс `js-`.
   Не используйте идентификаторы или стили, которые используются для оформления. 
   Это будет запутывать и мешать рефакторингу.
    ```javascript
    // Плохо
    $('.buttons').on('click', function () {});

    // Хорошо
    $('.js-confirm-button').on('click', function () {});
    ```
10. Запрещено производить явные изменения отдельных стилей в скриптах. Оперируйте классами стилей.
    ```javascript
    // Плохо
    $('.js-menu-item').css({color: 'red'});

    // Хорошо
    $('.js-menu-item').addClass('menu__item_selected');
    ```
11. Используйте тег `noscript` для обработки ситуации, когда скрипты отключены.
3. Для каждой страницы все скрипты должны помещаться в соответствующий файл.
   Если код дублируется между страницами, оформите его в отдельный модуль.


## Картинки

1. Нужно использовать png для схем и скриншотов, jpg для фотографий.
2. У картинок должен быть указан `alt` и `title`.
3. Изображения должны масштабироваться в зависимости от размера окна (`max-width: 100%; height: auto;`).
4. Изображения должны быть оптимизированы. Список оптимизаторов смотри в конце.
5. Все визуальные украшения (рамки, тени) должны быть сделаны с помощью стилей, а не быть включенными в картинку.
6. Стилевые (стрелки, иконки, фоны) и содержательные картинки (скриншоты, фотографии) должны лежать в разных папках.

## Важные мелочи

Смотри пункт ["Важные мелочи"](https://github.com/ihorzenich/html5checklist#18-%D0%92%D0%B0%D0%B6%D0%BD%D1%8B%D0%B5-%D0%BC%D0%B5%D0%BB%D0%BE%D1%87%D0%B8)
в заметке Ihor Zenich. И всю заметку тоже обязательно смотри.

## Оптимизация

Это необязательный пункт для верстки, но очень желательный для всего сайта в целом.

1. Автоматическая конкатенация и минификация CSS, JavaScript, HTML.
2. Необходимо оптимизировать картинки.
3. Ленивая загрузка скриптов и картинок.
4. Использование тега `picture` и `srcset` для адаптивной загрузки картинок.

## Особенности статических сайтов

Про особенности создания сайтов с помощью [Sculpin](http://sculpin.io/) - генератора статических сайтов -
в соответствующей [статье](https://github.com/ertrade/html5-guide/blob/master/Sculpin.md).

## Ссылки

* https://github.com/ihorzenich/html5checklist
* https://github.com/ihorzenich/WebPerformanceChecklist
* https://ru.bem.info/
* https://operatino.github.io/MCSS/
* https://google.github.io/styleguide/htmlcssguide.xml
* http://editorconfig.org/
* http://csslint.net/
* http://jshint.com/
* https://tinypng.com/
* https://tinyjpg.com/
* http://compresspng.com/
* http://compressjpeg.com/
* https://gtmetrix.com/
* https://github.com/nicothin/web-design
